<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Orientação a Objetos em Python</title>

    <meta name="description" content="Orientação a Objetos em Python">
    <meta name="author" content="Bernardo Fontes">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../css/reveal.min.css">
    <link rel="stylesheet" href="../css/theme/simple.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
    	if( window.location.search.match( /print-pdf/gi ) ) {
    		var link = document.createElement( 'link' );
    		link.rel = 'stylesheet';
    		link.type = 'text/css';
    		link.href = '../css/print/pdf.css';
    		document.getElementsByTagName( 'head' )[0].appendChild( link );
    	}
    </script>
    <style type="text/css">
      .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
        text-transform: none !important;
      }
      .reveal section img {
        border: none !important;
        box-shadow: none !important;
      }
      .reveal .progress span {
        background: #FF0000 !important;
      }

      .without_ul_style > ul {
        list-style-type: none;
      }
    </style>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-63105879-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!--[if lt IE 9]>
    <script src="../lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <div class="slides">
      <!-- Any section element inside of this container is displayed as a slide -->

        <section>
          <h1>II Encontro PythonVale</h1>
          <h3>Orientação a Objetos em Python</h3>
          <br>

          <h3><b>Bernardo Fontes</b></h3>
          <br>

          <h4>São José dos Campos/SP</h4>
          <h4>30 de Maio de 2015</h4>
        </section>

        <section>
          <h2>Só para dizer um oi!</h2>
          <h3>
            <p><a target="_blank" href="https://twitter.com/bbfontes">twitter.com/bbfontes</a></p>
            <p><a target="_blank" href="https://github.com/berinhard">github.com/berinhard</a></p>
            <p><a target="_blank" href="http://garimpo.fm/">garimpo.fm</a></p>
            <p><a target="_blank" href="http://pessoas.cc/">pessoas.cc</a></p>
            <p><a target="_blank" href="mailto:bernardoxhc@gmail.com">bernardoxhc@gmail.com</a></p>
          </h3>
          <p>
            <a href="http://elogroup.com.br/">
              <img width="50%" src="images/Logo-EloGroup-fundo-claro.jpg">
            </a>
          </p>
        </section>

        <section>
            <h2><p><a target="_blank" href="https://berinhard.github.io/talks/">berinhard.github.io/talks/</a></p></h2>
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Básicos de Orientação a Objetos (OO)
          - ### O que é um **objeto**?
          - ### Definições **variam** por linguagem
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Em Python
          - ### Pode ser referenciado a uma **variável**
          - ### Pode ser utilizado como **parâmetro em funções**
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Em Python
          - ### **Tudo** é um objeto
        </section>

        <section data-markdown>
          ## Um inteiro é um objeto
          ```python
          In [1]: a = 4

          In [2]: a.__sub__(3)
          Out[2]: 1

          In [3]: print dir(a)
          ['__abs__', '__add__', '__and__', '__class__', '__cmp__', '__coerce__', '__delattr__', '__div__', '__divmod__', '__doc__', '__float__', '__floordiv__', '__format__', '__getattribute__', '__getnewargs__', '__hash__', '__hex__', '__index__', '__init__', '__int__', '__invert__', '__long__', '__lshift__', '__mod__', '__mul__', '__neg__', '__new__', '__nonzero__', '__oct__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdiv__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__trunc__', '__xor__', 'bit_length', 'conjugate', 'denominator', 'imag', 'numerator', 'real']

          In [4]: a.__class__
          Out[4]: int
          ```
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Objetos no Conceito de OO
          - ### **Abstrações de entidades** que surgiram na discussão do domínio (Paciente)
          - ### **Estruturas lógicas** para auxiliar operações do domínio (Conexão com o BD)
          - ### Definem a estratégia de **design** do sistema
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Como Determinar um Objeto
          - ### Conjunto de valores associados a ele (**Estado**)
          - ### Ações que o objeto pode desempenhar (**Comportamento**)
          - ### Um objeto possui Estado **e/ou** Comportamento
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Como Determinar um Objeto
          - ### Conjunto de valores associados a ele (**Estado**)
          - ### Ações que o objeto pode desempenhar (**Comportamento**)
          - ### Um objeto possui Estado **e/ou** Comportamento
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Apresentando as Classes
          - ### **Descrevem** como definir o estado e os comportamentos de um objetos
          - ### Criam **instâncias de objetos**
        </section>

        <section data-markdown class="fragments">
            ## Exemplo em Python
            ```python
            class Pessoa(object):  # object não necessário em Python 3
                pass

            ###

            In [55]: bernardo = Pessoa()

            In [56]: bernardo.__class__
            Out[56]: __main__.Pessoa

            In [57]: Pessoa.__base__
            Out[57]: object

            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Definindo o Estado
            - ### Avaliação do **conjunto de valores** de atributos de um objeto
            - ### De **instância**: armazenam dados da instância em questão
            - ### De **classe**: armazenam dados da classe que são comuns para todas as instâncias
        </section>


        <section data-markdown class="fragments without_ul_style">
            ## Encapsulando o Estado
            - ### **Públicos**: atributos que podem ser utilizados por qualquer outro objeto
            - ### **Privados**: atributos só podem ser utilizados no contexto interno da classe
        </section>

        <section data-markdown class="fragments">
            ## Exemplo em Python
            ```python
            class Pessoa(object):
                opcoes_sexo = ('m', 'f')  # atributo de classe

                def __init__(self, nome, sexo, nascimento):
                    self.nome = nome  # atributo
                    self.sexo = sexo  # atributos de instância públicos
                    self.__nascimento = nascimento  # atributo de instância privado
            ```
        </section>

        <section data-markdown class="fragments">
            ## Exemplo em Python
            ```python
            In [3]: Pessoa.opcoes_sexo
            Out[3]: ('m', 'f')

            In [4]: bernardo = Pessoa(nome='Bernardo', sexo='m', nascimento=date(1988, 9, 22))

            In [5]: print bernardo.nome, bernardo.sexo
            Bernardo m

            In [6]: print bernardo.__nascimento
            ---------------------------------------------------------------------------
            AttributeError                            Traceback (most recent call last)
            <ipython-input-6-1d99028a35e5> in <module>()
            ----> 1 print bernardo.__nascimento

            AttributeError: 'Pessoa' object has no attribute '__nascimento'
            ```
        </section>

        <section data-markdown class="fragments">
            ## Fluxo de Construção
            ```python
            Pessoa(nome='Bernardo', sexo='m', nascimento=date(1988, 9, 22))  # chamada ao construtor

            Pessoa.__new__()  # responsável pela alocação de recursos

            Pessoa.__init__(nome, sexo, nascimento)  # faz a inicialização do objeto
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Definindo o Comportamento do Objeto
            - ### Métodos que executam **operações** sobre a instância
            - ### Respeitam as mesmas regras de **encapsulamento**
        </section>

        <section data-markdown class="fragments">
            ## Exemplo em Python
            ```python
            class Pessoa(object):
                opcoes_sexo = ('m', 'f')

                def __init__(self, nome, sexo, nascimento):
                    self.nome = nome
                    self.sexo = sexo
                    self.__nascimento = nascimento

                def calcula_idade(self):
                    # dumb way
                    hoje = date.today()
                    return hoje.year - self.__nascimento.year

            #####

            In [35]: bernardo.calcula_idade()
            Out[35]: 26
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Lidando com Encapsulamento Pythonicamente
          - ### O **conceito** de getter/setter é válido, o problema é o **como**
          - ### Python **properties**!
          - ### Regra: o sistema não aceita atualizar nascimentos para antes de 1980
        </section>

        <section data-markdown>
            ## Exemplo em Python
            ```python
            class Pessoa(object):
                opcoes_sexo = ('m', 'f')

                def __init__(self, nome, sexo, nascimento):
                    self.nome = nome
                    self.sexo = sexo
                    self.__nascimento = nascimento

                def calcula_idade(self):
                    hoje = date.today()
                    return hoje.year - self.__nascimento.year

                @property
                def nascimento(self):
                    return self.__nascimento

                @nascimento.setter
                def nascimento(self, data):
                    if data.year < 1980: #>
                       raise ValueError("Data antes de 1980.")
                    self.__nascimento = data
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Exemplo em Python
            ```python
            In [43]: bernardo = Pessoa(nome='Bernardo', sexo='m', nascimento=date(1988, 9, 22))

            In [44]: bernardo.nascimento
            Out[44]: datetime.date(1988, 9, 22)

            In [45]: bernardo.nascimento = date(1990, 1, 1)

            In [46]: bernardo.nascimento
            Out[46]: datetime.date(1990, 1, 1)

            In [47]: bernardo.nascimento = date(1970, 1, 1)
            ---------------------------------------------------------------------------
            ValueError                                Traceback (most recent call last)
            <ipython-input-47-1a29391ac73a> in <module>()
            ----> 1 bernardo.nascimento = date(1970, 1, 1)

            <ipython-input-42-45a464f6ce98> in nascimento(self, data)
                 18     def nascimento(self, data):
                 19         if data.year < 1980:
            ---> 20             raise ValueError("Data antes de 1980.")
                 21         self.__nascimento = data

            ValueError: Data antes de 1980.
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Definindo o Comportamento da Classe
            - ### Podemos definir métodos que podem ser executados **sem instâncias** das classes
            - ### Métodos de **classe**: recebem a classe como parâmetro
            - ### Métodos de **estáticos**: não recebem a classe como parâmetro
        </section>

        <section data-markdown>
            ## Exemplo em Python
            ```python
            class Pessoa(object):
                opcoes_sexo = ('m', 'f')

                ## Código antigo

                @classmethod
                def novo_homem(cls, nome, nascimento):
                    return cls(nome, cls.opcoes_sexo[0], nascimento)

                @staticmethod
                def exemplo():
                    pass
            ###

            In [51]: bernardo = Pessoa.novo_homem(nome='Bernardo', nascimento=date(1988, 9, 22))

            In [52]: bernardo.sexo
            Out[52]: 'm'
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Outros 3 Pontos Sobre OO
            - ### Sobrecarga de Operadores
            - ### Sistema de Herança
            - ### Polimorfismo
        </section>

        <section>
            <h2>Sobrecarga de Operadores</h2>
            <h3>Métodos que definem como os objetos vão se comportar quando <b>aplicados a operadores</b> (-, +, /, > ect)</h3>
        </section>

        <section data-markdown>
            ## Exemplo em Python
            ```python
            class Data(object):

                def __init__(self, dia, mes, ano):
                    self.dia = dia
                    self.mes = mes
                    self.ano = ano

                def __eq__(self, other):
                    return self.dia == other.dia and self.mes == other.mes and self.ano == other.ano

                def __repr__(self):
                    return "{dia}/{mes}/{ano}".format(**self.__dict__)
            ####

            In [3]: aniversario = Data(22, 9, 1988)

            In [4]: nascimento = Data(22, 9, 1988)

            In [5]: print aniversario == nascimento
            True

            In [6]: print aniversario
            22/9/1988
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Sistema de Heranças
            - ### Utilização de uma classe como **base** para uma classe que a herda para **adicionar comportamento**
            - ### Respeito ao **contrato** da classe pai
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## No Python
            - ### Herança Simples
            - ### Herança Múltipla
            - ### Classes Abstratas
            - ### Não suporta Interfaces
        </section>

        <section data-markdown >
            ## Herança Simples
            ```python
            class Animal(object):

                def __init__(self, especie):
                    self.especie = especie

            class Cao(Animal):

                def __init__(self):
                    super(Cao, self).__init__('Canis lupus familiaris')

                def latir(self):
                    print 'au'

            ###
            In [27]: gato = Animal('Felis catus')

            In [28]: gato.especie
            Out[28]: 'Felis catus'

            In [29]: gato.latir()
            ---------------------------------------------------------------------------
            AttributeError                            Traceback (most recent call last)
            <ipython-input-29-d693bac8728f> in <module>()
            ----> 1 gato.latir()

            AttributeError: 'Animal' object has no attribute 'latir'

            In [30]: cao = Cao()

            In [31]: cao.especie
            Out[31]: 'Canis lupus familiaris'

            In [32]: cao.latir()
            au

            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Herança Múltipla
            - ### **MRO**: Method Resolution Name
            - ### [Django Class-Based Views](https://github.com/django/django/tree/master/django/views/generic)
            - ```python
            class UpdateView(SingleObjectTemplateResponseMixin, BaseUpdateView):
                """
                View for updating an object,
                with a response rendered by template.
                """
                template_name_suffix = '_form'
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Classes Abstratas
            - ### **Classes bases** que definem **métodos obrigatórios** a serem implementadas pelas classes filho
            - ### Em Python, prefiro **Duck Typing**: preocupação com a semântica ao invés de herança ([referência](https://stackoverflow.com/questions/17028722/is-this-duck-typing-in-python))
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Módulo abc
            ```python
            from abc import ABCMeta, abstractmethod

            class Animal(object):
                __metaclass__ = ABCMeta

                @abstractmethod
                def faz_barulho(self):
                    pass

            class Cao(Animal):
                def faz_barulho(self):
                    return "au au"

            class Gato(Animal):
                pass

            #####

            In [34]: cao = Cao()

            In [35]: cao.faz_barulho()
            Out[35]: 'au au'

            In [36]: gato = Gato()
            ---------------------------------------------------------------------------
            TypeError                                 Traceback (most recent call last)
            <ipython-input-37-6ac9056c09f5> in <module>()
            ----> 1 gato = Gato()

            TypeError: Can't instantiate abstract class Gato with abstract methods faz_barulho
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Polimorfismo
            - ### Classes que descrevem métodos com **mesmo contrato** mas com **comportamentos diferentes**
            - ### Vantagem: não precisamos nos preocupar com **quem** estamos falando, mas apenas se o objeto sabe responder **como** queremos
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Exemplo Python
            ```python
            In [2]: dict_obj = {'nome': 'bernardo', 'idade': 26}

            In [3]: list_obj = ['pedra', 'papel', 'tesoura']

            In [4]: tuple_obj = (9, 3)

            In [6]: dict_obj.__len__(), list_obj.__len__(), tuple_obj.__len__()
            Out[6]: (2, 3, 2)

            In [7]: len(dict_obj), len(list_obj), len(tuple_obj)
            Out[7]: (2, 3, 2)

            In [8]: dict_obj.__getitem__('nome'), list_obj.__getitem__(1), tuple_obj.__getitem__(0)
            Out[8]: ('bernardo', 'papel', 9)

            In [9]: dict_obj['nome'], list_obj[1], tuple_obj[0]
            Out[9]: ('bernardo', 'papel', 9)
            ```
        </section>

        <section data-markdown class="fragments without_ul_style">
            ## Quem aqui sabe fazer Orientação a Objetos?
            - ### Eu **não sabia**
            - ### Saber as ferramentas **não é** saber OO
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Responsabilidades dos Objetos
          - ### Alterar seu próprio estado --> **Encapsulamento**
          - ### Colaboração com outros objetos através da **troca de mensagens**
          - ### Colaboração >> Dependência >> Complexidade >> Acoplamento
        </section>

        <section data-markdown class="fragments without_ul_style">
          ## Problema de alto acoplamento
          - ### Rigidez: dificuldade de **mudanças**
          - ### Fragilidade: pontos de falha por **efeito cascata**
          - ### Imobilidade: sem **reutilização** de partes do software
          - ### Viscosidade: mais fácil **adicionar hacks** que soluções corretas
        </section>

        <section data-markdown class="without_ul_style">
          ## Princípios de OO
          - ### S
          - ### O
          - ### L
          - ### I
          - ### D
        </section>

        <section data-markdown class="without_ul_style">
          ## Princípios de OO
          - ### Single Responsibility Principle
          - ### Open Closed Principle
          - ### Liskov Substitution Principle
          - ### Interface Segregation Principle
          - ### Dependency Inversion Principle
        </section>

        <section data-markdown class="without_ul_style">
          ## Single Responsibility Principle
          - ### Nunca deve exstir mais de **uma razão para modificar** algo em uma classe.
        </section>

        <section data-markdown class="without_ul_style">
          ## Open Closed Principle
          - ### Toda classe deve estar **aberta para extensão**, mas **fechada para modificação**
        </section>

        <section data-markdown>
          ## Estudar Design Pattenrs
        </section>

        <section data-markdown>
          ## Referências
        </section>

        <section>
            <h2>Applying UML and Patterns</h2>
            <a href="http://www.amazon.com/Applying-UML-Patterns-Introduction-Object-Oriented/dp/0131489062/" target = "_blank"><img height="580px" src="images/uml_pattenrs.jpg"></a>
        </section>

        <section>
            <h2>Curso Objetos Pythônicos</h2>
            <a href="https://adm.python.pro.br/cursos/objetos-pythonicos" target = "_blank"><img height="580px" src="images/objetos_python.png"></a>
        </section>

        <section>
            <h2>Object Mentor (SOLID)</h2>
            <a href="http://www.objectmentor.com/omSolutions/oops_what.html" target = "_blank"><img height="580px" src="images/object_mentor.png"></a>
        </section>

        <section>
            <h2>GOOS Guided By Tests</h2>
            <a href="http://www.amazon.com/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627" target = "_blank"><img height="580px" src="images/goos.jpg"></a>
        </section>

        <section>
            <h2>Design Patterns</h2>
            <a href="http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/" target = "_blank"><img height="580px" src="images/design_patterns.png"></a>
        </section>

        <section data-markdown>
          ## Dúvidas?
        </section>

        <section>
          <h2>Obrigado!</h2>
          <h3>
            <br/>
            <p>Bernardo Fontes</p>
            <br/>
            <p><a target="_blank" href="https://twitter.com/bbfontes">twitter.com/bbfontes</a></p>
            <p><a target="_blank" href="https://github.com/berinhard">github.com/berinhard</a></p>
            <p><a target="_blank" href="http://garimpo.fm/">garimpo.fm</a></p>
            <p><a target="_blank" href="http://pessoas.cc/">pessoas.cc</a></p>
            <p><a target="_blank" href="mailto:bernardoxhc@gmail.com">bernardoxhc@gmail.com</a></p>
          </h3>
        </section>

      </div>

    </div>

    <script src="../lib/js/head.min.js"></script>
    <script src="../js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        // transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
        transition: 'zoom',

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
        { src: 'lib/js/classList.js',
          condition: function() { return !document.body.classList; } },
        { src: '../plugin/markdown/marked.js',
          condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '../plugin/markdown/markdown.js',
          condition: function() { return !!document.querySelector( '[data-markdown]' ); },
          callback: function() {
            Array.prototype.forEach.call(
            document.querySelectorAll('section.fragments > ul > li'),
              function(ele){ ele.className = 'fragment roll-in'; });
            } },
        { src: '../plugin/highlight/highlight.js', async: true,
          callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: '../plugin/zoom-js/zoom.js', async: true,
          condition: function() { return !!document.body.classList; } },
        { src: '../plugin/notes/notes.js', async: true,
          condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
  </body>
</html>
